# Домашнее задание №4

Измерение активности GC

Написать приложение, которое следит за сборками мусора и пишет в лог количество сборок каждого типа (young, old) и время которое ушло на сборки в минуту.
Добиться OutOfMemory в этом приложении через медленное подтекание по памяти (например добавлять элементы в List и удалять только половину).
Настроить приложение (можно добавлять Thread.sleep(...)) так чтобы оно падало с OOM примерно через 5 минут после начала работы.
Собрать статистику (количество сборок, время на сборрки) по разным типам GC.

### Комментарии

Всё наглядно при запуске. Реализация настолько проста, что вся логика работы оставлена в классе Main.

Компиляция: **mvn clean compile**

Запуск, 4 варианта:

**java -XX:+UseG1GC -cp ./target/classes ru.otus.danik_ik.homework04.Main**

**java -XX:+UseSerialGC -cp ./target/classes ru.otus.danik_ik.homework04.Main**

**java -XX:+UseParallelGC -cp ./target/classes ru.otus.danik_ik.homework04.Main**

**java -XX:+UseConcMarkSweepGC -cp ./target/classes ru.otus.danik_ik.homework04.Main**

С корне проекта лежат пять пакетных файлов Windows с соответствующими командами. Вывод идёт на консоль, специально логирование в файл не делал, просто перенаправлял вывод в файл.

### Результаты (по 1 запуску каждого варианта):

#### G1:

*Минимальное общее время пауз, однако максимальная предельная продолжительность паузы (при cборке Old Generation)*

Продолжительность работы до возникновения исключения: 306 с

215 сборок Young generation, общая продолжительность 1735 мс, средняя -- 8 мс

2 сборки Old generation,  обшая продолжительность 706 мс, средняя -- 353 мс

Всего 2038 мс

#### Serial:

Продолжительность работы до возникновения исключения: 325 с

22 сборки Young generation (Copy), общая продолжительность 1200 мс, средняя -- 55 мс

30 сборок Old generation (MarkSweepCompact),  обшая продолжительность 6030 мс, средняя -- 201 мс

Всего 7230 мс

#### Parallel:

Продолжительность работы до возникновения исключения: 261 с

28 сборок Young generation (PS MarkSweep), общая продолжительность 5089 мс, средняя -- 181 мс

38 сборок Old generation (PS Scavenge),  обшая продолжительность 1182 мс, средняя -- 31 мс

Всего 6271 мс

#### ConcurrentMarkSweep:

*JavaVM предупреждает о том, что данная опция является устаревшей и может быть удалена в следующих реализациях. Но паузы в среднем таки да, наименьшие.*

Продолжительность работы до возникновения исключения: 329

156 сборок Young generation (ParNew), общая продолжительность 1651мс, средняя -- 10 мс

70 сборок Old generation (ConcurrentMarkSweep),  обшая продолжительность 4511 мс, средняя -- 64 мс

Всего 6162 мс





#### 